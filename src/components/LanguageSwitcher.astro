---
const base = import.meta.env.BASE_URL || "/";
const pathname = Astro.url.pathname;

const currentLang = pathname.startsWith(`${base}/es`) ? "es" : "en";

const pathWithoutLang =
  currentLang === "es"
    ? pathname.replace(`${base}/es`, "")
    : pathname.replace(base, "");

function translatedPath(lang: string) {
  if (lang === "en") {
    return `${base}${pathWithoutLang}`;
  } else {
    return `${base}/es${pathWithoutLang}`;
  }
}
---

<div
  class="inline-flex items-center gap-1 bg-(--bg) p-1 rounded-lg shadow-m"
>
  <a
    href={translatedPath("en")}
    class={`text-(--text) px-4 py-1.5 rounded-lg font-medium transition-all duration-300 ${
      currentLang === "en"
        ? "bg-(--bg-lighter) shadow-l"
        : "bg-(--bg-light) hover:bg-(--bg-lighter)"
    }`}
  >
    EN
  </a>

  <a
    href={translatedPath("es")}
    class={`text-(--text) px-4 py-1.5 rounded-lg font-medium transition-all duration-300 ${
      currentLang === "es"
        ? "bg-(--bg-lighter) shadow-l"
        : "bg-(--bg-light) hover:bg-(--bg-lighter)"
    }`}
  >
    ES
  </a>
</div>
